
# coding: utf-8

# In[1]:

import Orange


raw_data = ["boingo,band",
"band",
"band",
"chance,band",
"band",
"force",
"band",
"band",
"band",
"singer,official",
"band",
"band",
"band",
"band",
"band",
"force",
"band",
"band",
"band",
"band",
"boom",
"band",
"singer",
"band",
"band",
"palestinian,singer",
"music",
"band",
"band",
"band",
"band",
"band",
"band",
"singer,pianist",
"sarah",
"band",
"paris",
"singer,pianist",
"sarah",
"band",
"palestinian,singer",
"gorillaz,singer",
"band",
"band",
"paris",
"band",
"band",
"band",
"band",
"band",
"boom",
"band",
"band",
"band",
"band",
"singer,sarah",
"band",
"music",
"band",
"band",
"band",
"paris",
"boom",
"singer",
"paris",
"singer,sarah",
"band",
"boom",
"band",
"band",
"force",
"band",
"paris",
"band",
"paris",
"band",
"band",
"band",
"band",
"singer,7th",
"band,orchestra",
"band",
"boom",
"band",
"band",
"singer,sarah",
"band",
"singer",
"band",
"band",
"band",
"band",
"band",
"band",
"singer,playboy",
"band",
"band",
"guitarist,band",
"band",
"band",
"band,song",
"band",
"band",
"band",
"band",
"paris",
"band",
"force",
"band",
"band",
"band",
"band",
"band",
"paris",
"band",
"band",
"band",
"song",
"band",
"band",
"singer,vile,paris",
"band,band",
"singer,sarah",
"band",
"band",
"guitarist,band",
"paris",
"band",
"band",
"band",
"band",
"band",
"paris",
"band,band",
"band",
"paris",
"band",
"band,band",
"band",
"band",
"band",
"paris",
"band",
"band",
"band",
"paris",
"band",
"singer",
"band",
"band",
"music",
"band",
"singer",
"music",
"singer",
"singer",
"band",
"singer",
"band",
"band",
"singer",
"band",
"band",
"singer",
"band",
"band",
"band",
"band",
"band",
"band",
"paris",
"band",
"song",
"band",
"band",
"band",
"paris",
"paris",
"paris",
"paris",
"band",
"band",
"band",
"band",
"paris",
"band",
"band",
"paris",
"diana",
"singer",
"singer",
"band",
"band",
"paris",
"band",
"band,orchestra",
"band",
"singer",
"singer,sarah",
"band",
"band",
"singer",
"band",
"band",
"band",
"jack,singer",
"chance",
"band,rosamunde,orchestra",
"chance",
"chance",
"jack,singer",
"chance",
"chance",
"singer",
"chance",
"band",
"chance",
"singer,band",
"band",
"band",
"paris",
"band",
"band",
"band",
"paris",
"paris",
"paris",
"band",
"band",
"band",
"paris",
"band",
"band",
"paris",
"paris",
"band",
"diana",
"band",
"band",
"chance",
"factor00a0singer",
"band",
"band",
"chance",
"band",
"paris",
"paris",
"band",
"paris",
"chance",
"band",
"chance",
"band",
"chance",
"band",
"singer",
"band",
"chance",
"paris",
"chance",
"chance",
"jack,singer",
"band",
"band",
"chance",
"paris",
"chance",
"chance",
"chance",
"band",
"singer",
"singer,playboy",
"band",
"singer",
"band",
"band",
"band",
"paris",
"paris",
"band",
"band",
"band",
"singer",
"band",
"julia",
"band",
"excitement",
"band",
"band",
"band",
"band",
"singer",
"singer,amp,amp",
"band,music",
"band",
"singer",
"singer",
"rampb,singer",
"band",
"singer",
"singer",
"singer",
"7th",
"band",
"band",
"renowned,singer",
"band",
"amp",
"singer",
"official",
"band",
"band",
"force",
"band",
"band",
"band",
"singer",
"singer",
"singer",
"singer",
"music",
"singer",
"singer",
"music",
"singer",
"singer",
"singer",
"band",
"band",
"band",
"rampb,singer",
"paris",
"band",
"music,singer,amp",
"band",
"singer",
"song",
"singer",
"band",
"singer",
"renowned,singer",
"band",
"band",
"singer",
"singer",
"singer",
"singer",
"paris",
"band",
"renowned,singer",
"band",
"paris",
"chance",
"christ",
"singer",
"amp,band",
"singer",
"band",
"singer",
"singer",
"singer",
"band",
"song",
"band",
"band,strings",
"band",
"band",
"band",
"singer",
"amp,amp",
"singer",
"song",
"singer",
"band",
"orchestra",
"singer",
"singer",
"singer",
"singer",
"singer",
"song",
"band",
"singer",
"band",
"band",
"excitement",
"100",
"band",
"singer",
"band",
"mcr,band,music",
"100",
"singer",
"song",
"band",
"band",
"music",
"band",
"song",
"band",
"band",
"band",
"renowned,singer",
"music",
"band",
"paris",
"jamming",
"band",
"singer",
"amp",
"singer",
"singer",
"band",
"song",
"band",
"singer,rydell,siriusxm",
"band",
"band",
"singer",
"singer",
"band",
"band",
"singer",
"singer",
"singer",
"renowned,singer",
"singer",
"metallica s",
"song",
"singer,rydell,siriusxm",
"renowned,singer",
"singer",
"song",
"band",
"band",
"singer",
"band",
"singer",
"band",
"band",
"band",
"singer",
"amp,band,song",
"band",
"singer",
"band",
"music",
"singer",
"singer",
"singer",
"band",
"7th",
"amp",
"singer",
"renowned,singer",
"singer",
"singer",
"mcr,band,music",
"band",
"band",
"pianist,amp",
"singer",
"singer",
"mcr,band,music",
"band,gla",
"drummer,band",
"singer",
"singer",
"singer",
"singer",
"singer",
"100",
"band",
"singer",
"band",
"excitement",
"7th",
"singer",
"band",
"band,gla"]



# write data to the text file: data.basket
f = open('data.basket', 'w')
for item in raw_data:
    f.write(item + '\n')
f.close()

# Load data from the text file: data.basket
data = Orange.data.Table("data.basket")


# Identify association rules with supports at least 0.3
rules = Orange.associate.AssociationRulesSparseInducer(data, support = 0.005)


# print out rules
print "%4s %4s  %s" % ("Supp", "Conf", "Rule")
for r in rules[:]:
    print "%4.1f %4.1f  %s" % (r.support, r.confidence, r)

with open("result.csv",'w') as fin:
    rule = rules[0]
    for idx, d in enumerate(data):
        print '\nUser {0}: {1}'.format(idx, raw_data[idx])
        for r in rules:
            if r.applies_left(d) and not r.applies_right(d):
                print "%4.4f %4.4f  %s" % (r.support, r.confidence, r)
                fin.write("%4.4f,%4.4f,%s" % (r.support, r.confidence, r))
                fin.write("\n")

